<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-site-verification" content="vmXWJlLdckrKIGnpPbGD2qo3eubyiwz8FChm3yxJE0c" />
    <meta charset="UTF-8">
    <title>Ultimate 2026 Football Guessr - 94 Clubs</title>
    <style>
        body { background:#0f172a; color:white; font-family: 'Segoe UI', sans-serif; text-align:center; padding: 20px; }
        .game-container { max-width: 1100px; margin: 0 auto; position: relative; }
        input { padding:12px; width:350px; border-radius:8px; border:none; font-size:16px; margin-bottom:10px; outline: none; }
        button { padding:12px 24px; border:none; border-radius:8px; background:#2563eb; color:white; cursor:pointer; font-weight:bold; margin: 5px; transition: 0.3s; }
        button:hover { background: #3b82f6; transform: scale(1.05); }
        #suggestions { background:#1e293b; width:350px; margin:0 auto; border-radius:8px; max-height:200px; overflow-y:auto; position: absolute; left: 50%; transform: translateX(-50%); z-index: 100; text-align: left; }
        #suggestions div { padding:10px; cursor:pointer; border-bottom: 1px solid #334155; }
        table { margin:30px auto; border-collapse:separate; border-spacing: 5px; width: 100%; }
        td { padding:15px; border-radius:5px; font-weight:bold; min-width:90px; text-transform: uppercase; font-size: 11px; }
        .green { background:#22c55e; } .yellow { background:#eab308; color:black; } .gray { background:#374151; }
        .header-row td { background: none; color: #94a3b8; border: none; }
    </style>
</head>
<body>

<div class="game-container">
    <h1>football guesser</h1>
    <p id="status">Jooho's game for when they ban it</p>

    <div style="position: relative;">
        <input type="text" id="guessInput" placeholder="Start typing player name..." oninput="showSuggestions()" autocomplete="off">
        <div id="suggestions"></div>
    </div>
    <br>
    <button onclick="checkGuess()">SUBMIT GUESS</button>
    <button onclick="initGame()" style="background:#475569;">NEW GAME</button>
    <button onclick="giveUp()" style="background:#ef4444;">GIVE UP</button>
    <button onclick="gethint()" style=backround: green;">HINT</button>

    <table id="results">
        <tr class="header-row">
            <td>NAME</td><td>CLUB</td><td>LEAGUE</td><td>NATION</td><td>POS</td><td>AGE</td>
        </tr>
    </table>
</div>

<script type="module">

import players from "./team/allplayers.js";
console.log(players.length); // ‚Üê PUT IT HERE
let secretPlayer, attempts;




//////////////////////////////////////////////////////
// GOOGLE STYLE SEARCH
//////////////////////////////////////////////////////

window.showSuggestions = function() {

    const val = document.getElementById("guessInput").value.toLowerCase().trim();
    const sugBox = document.getElementById("suggestions");

    sugBox.innerHTML = "";

    if (!val) return;

    players
        .filter(p => p.name.toLowerCase().includes(val))
        .slice(0,8)
        .forEach(p => {

            const d = document.createElement("div");
            d.textContent = p.name;

            d.onclick = () => {
                document.getElementById("guessInput").value = p.name;
                sugBox.innerHTML = "";
            };

            sugBox.appendChild(d);
        });
};

//////////////////////////////////////////////////////
function initGame() {
    secretPlayer = players[Math.floor(Math.random() * players.length)];
    attempts = 0;
    
    // RESET HINT STATE
    hintLevel = 0;
    hintsDisabled = false;

    document.getElementById("results").innerHTML =
        `<tr class="header-row">
            <td>NAME</td><td>CLUB</td><td>LEAGUE</td><td>NATION</td><td>POS</td><td>AGE</td>
        </tr>`;

    document.getElementById("status").innerHTML = "Jooho's game for when they ban it (2026)";
    
    // Reset input and button styles if you changed them in getHint
    const input = document.getElementById("guessInput");
    input.value = "";
    input.disabled = false;
}

// THE HINT FUNCTION
let hintLevel = 0;
let hintsDisabled = false;

window.gethint = function() {
    if (!secretPlayer || hintsDisabled) return;
    
    hintLevel++;
    const status = document.getElementById("status");
    
    if (hintLevel === 1) {
        status.innerHTML = `üìç Hint 1: Nationality is <b>${secretPlayer.nationality}</b>`;
    } else if (hintLevel === 2) {
        status.innerHTML = `üèÉ Hint 2: Position is <b>${secretPlayer.position}</b>`;
    } else if (hintLevel === 3) {
        status.innerHTML = `üéÇ Hint 3: Age is <b>${secretPlayer.age}</b>`;
    } else if (hintLevel === 4) {
        status.innerHTML = `üè† Hint 4: Club is <b>${secretPlayer.club}</b>`;
    } else if (hintLevel >= 5) {
        // LOCKOUT LOGIC
        status.innerHTML = "üõë <b>Give up already!</b>";
        hintsDisabled = true; 
        // Optional: Change button color to show it's disabled
        event.target.style.background = "#334155";
        event.target.style.cursor = "not-allowed";
    }
};
    
window.checkGuess = function() {

    const input = document.getElementById("guessInput");

    const guess = players.find(
        p => p.name.toLowerCase() === input.value.toLowerCase()
    );

/* SUGGESTIONS */
window.showSuggestions = function() {
    // 1. Get input and normalize it (remove accents from user typing)
    const val = document.getElementById("guessInput").value
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "");
    
    const sugBox = document.getElementById("suggestions");
    sugBox.innerHTML = "";

    if (!val) return;

    players
        .filter(p => {
            // 2. Normalize the player's name for the comparison
            const normalizedName = p.name
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "");
            
            return normalizedName.includes(val);
        })
        .slice(0, 10) // Limit results so it doesn't overflow
        .forEach(p => {
            let d = document.createElement("div");
            d.textContent = p.name; // Show the original name (with accents)
            d.onclick = () => {
                document.getElementById("guessInput").value = p.name;
                sugBox.innerHTML = "";
            };
            sugBox.appendChild(d);
        });
};

    
window.giveUp = function() {
    // 1. Reveal the name in the status bar
    document.getElementById("status").innerHTML =
        `üíÄ You gave up! The player was <b>${secretPlayer.name}</b>`;

    // 2. Insert the reveal row at the top of the table
    const row = document.getElementById("results").insertRow(1);

    // 3. Map the data to the columns (matching your table headers)
    const dataKeys = ["name", "club", "league", "nationality", "position", "age"];
    
    dataKeys.forEach(key => {
        const c = row.insertCell();
        c.textContent = secretPlayer[key];
        c.className = "green"; // Make the whole row green since it's the answer
    });

    // 4. Disable inputs and hints so they can't keep playing this round
    document.getElementById("guessInput").disabled = true;
    window.hintsDisabled = true; // Prevents clicking the hint button after giving up
};

    
    if (!guess) return;

    attempts++;
    input.value = "";
    document.getElementById("suggestions").innerHTML = "";

    const row = document.getElementById("results").insertRow(1);

    const createCell = (text, cls) => {
        const c = row.insertCell();
        c.textContent = text;
        c.className = cls;
    };

    createCell(guess.name, guess.name === secretPlayer.name ? "green" : "gray");

    createCell(
        guess.club,
        guess.club === secretPlayer.club
            ? "green"
            : (guess.league === secretPlayer.league ? "yellow" : "gray")
    );

    createCell(guess.league, guess.league === secretPlayer.league ? "green" : "gray");

    createCell(guess.nationality,
        guess.nationality === secretPlayer.nationality ? "green" : "gray");

    createCell(guess.position,
        guess.position === secretPlayer.position ? "green" : "gray");

    const arrow =
        guess.age < secretPlayer.age ? "‚Üë" :
        guess.age > secretPlayer.age ? "‚Üì" : "";

    createCell(
        `${guess.age} ${arrow}`,
        guess.age === secretPlayer.age ? "green" : "yellow"
    );

    if (guess.name === secretPlayer.name) {

        document.getElementById("status").innerHTML =
            `üèÜ <b>Correct! It was ${secretPlayer.name}!</b>`;
    }
};

window.initGame = initGame;

initGame();

</script>

</body>
</html>

