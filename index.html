import { mancity } from './teams/mancity.js';
import { arsenal } from './teams/arsenal.js';
import { manutd } from './teams/manutd.js';
import { liverpool } from './teams/liverpool.js';
import { spurs } from './teams/spurs.js';

import { chelsea } from './teams/chelsea.js';
import { newcastle } from './teams/newcastle.js';
import { astonvilla } from './teams/astonvilla.js';

export const players = [
...mancity,
...arsenal,
...manutd,
...liverpool,
...spurs,
...chelsea,
...newcastle,
...astonvilla
];

let secretPlayer;
let attempts;

window.initGame = function() {
secretPlayer = players[Math.floor(Math.random()*players.length)];
attempts = 0;

document.getElementById("results").innerHTML = `
<tr class="header-row">
<td>NAME</td><td>CLUB</td><td>LEAGUE</td><td>NATION</td><td>POS</td><td>AGE</td>
</tr>`;
}

window.showSuggestions = function() {
const val = guessInput.value.toLowerCase();
suggestions.innerHTML = "";

players
.filter(p => p.name.toLowerCase().includes(val))
.slice(0,10)
.forEach(p=>{
const d=document.createElement("div");
d.textContent=p.name;
d.onclick=()=>{
guessInput.value=p.name;
suggestions.innerHTML="";
};
suggestions.appendChild(d);
});
}

window.checkGuess = function() {

const guess = players.find(
p=>p.name.toLowerCase()===guessInput.value.toLowerCase()
);

if(!guess) return;

const row = results.insertRow(1);

const cell=(text,cls)=>{
const c=row.insertCell();
c.textContent=text;
c.className=cls;
};

cell(guess.name, guess.name===secretPlayer.name?"green":"gray");
cell(guess.club, guess.club===secretPlayer.club?"green":"gray");
cell(guess.league, guess.league===secretPlayer.league?"green":"gray");
cell(guess.nationality, guess.nationality===secretPlayer.nationality?"green":"gray");
cell(guess.position, guess.position===secretPlayer.position?"green":"gray");

const arrow = guess.age < secretPlayer.age ? "‚Üë" : guess.age > secretPlayer.age ? "‚Üì" : "";
cell(`${guess.age} ${arrow}`, guess.age===secretPlayer.age?"green":"yellow");

if(guess.name===secretPlayer.name){
status.innerHTML=`üèÜ Correct! It was ${secretPlayer.name}`;
}
}

initGame();
